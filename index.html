<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Games Deluxe Music Player</title>
<link rel="stylesheet" href="styles.css">
<style>
/* Inline fallback in case external CSS fails */
body { margin:0; font-family:Arial, sans-serif; }
</style>
</head>

<body class="dark">

<!-- Top Bar -->
<div class="top-bar">
    <div class="title">Games Deluxe Music Player</div>

    <!-- Theme Toggle -->
    <button id="themeToggle" class="theme-toggle">
        üåô
    </button>
</div>

<!-- Search Bar -->
<div class="search-container">
    <input id="searchInput" type="text" placeholder="Search for music...">
    <button id="searchBtn">Search</button>
</div>

<!-- Results Container -->
<div id="resultsWrapper">
    <div id="results"></div>
</div>

<!-- Player -->
<div id="playerBar">
    <div id="nowPlaying">
        <span id="npTitle">Nothing playing</span>
        <span id="npArtist"></span>
    </div>

    <div id="ytplayer"></div>

    <div class="controls">
        <button id="playPause">‚èØÔ∏è</button>
        <input type="range" id="seekBar" min="0" max="100" value="0">
        <input type="range" id="volume" min="0" max="100" value="80">
    </div>
</div><script>
// Theme Toggle
const themeBtn = document.getElementById("themeToggle");
themeBtn.addEventListener("click", () => {
    document.body.classList.toggle("light");
    document.body.classList.toggle("dark");

    themeBtn.textContent =
        document.body.classList.contains("light") ? "‚òÄÔ∏è" : "üåô";
});

// DOM Elements
const searchInput = document.getElementById("searchInput");
const searchBtn = document.getElementById("searchBtn");
const resultsDiv = document.getElementById("results");

// Search Handler
searchBtn.addEventListener("click", () => {
    let q = searchInput.value.trim();
    if (q.length < 1) return;
    fetchResults(q);
});

searchInput.addEventListener("keydown", e => {
    if (e.key === "Enter") searchBtn.click();
});// Load YouTube Iframe API
let tag = document.createElement("script");
tag.src = "https://www.youtube.com/iframe_api";
document.body.appendChild(tag);

let player;

// Create Player
function onYouTubeIframeAPIReady() {
    player = new YT.Player("ytplayer", {
        height: "0",
        width: "0",
        videoId: "",
        playerVars: { autoplay: 1 },
        events: {
            onReady: () => console.log("Player ready"),
            onStateChange: updateSeek
        }
    });
}

// Play Video
function playVideo(id, title, artist) {
    player.loadVideoById(id);
    document.getElementById("npTitle").textContent = title;
    document.getElementById("npArtist").textContent = artist;
}

// School‚ÄëSafe Search (no API key)
async function fetchResults(query) {
    resultsDiv.innerHTML = "Searching...";

    let url = `https://cors.isomorphic-git.org/https://www.youtube.com/results?search_query=${encodeURIComponent(query)}`;

    let html = await fetch(url).then(r => r.text());

    let matches = [...html.matchAll(/"videoId":"(.*?)"/g)];
    let titles = [...html.matchAll(/"title":{"runs":\[{"text":"(.*?)"}/g)];
    let channels = [...html.matchAll(/"longBylineText":{"runs":\[{"text":"(.*?)"}/g)];
    let thumbs = [...html.matchAll(/"thumbnail":{"thumbnails":\[{"url":"(.*?)"/g)];

    resultsDiv.innerHTML = "";

    for (let i = 0; i < 10; i++) {
        let id = matches[i]?.[1];
        let title = titles[i]?.[1];
        let artist = channels[i]?.[1];
        let thumb = thumbs[i]?.[1];

        if (!id || !title || !artist) continue;

        let item = document.createElement("div");
        item.className = "result-item";
        item.innerHTML = `
            <img src="${thumb}" class="thumb">
            <div class="info">
                <div class="song">${title}</div>
                <div class="artist">${artist}</div>
            </div>
        `;

        item.onclick = () => playVideo(id, title, artist);
        resultsDiv.appendChild(item);
    }
}

// Player Controls
document.getElementById("playPause").onclick = () => {
    let state = player.getPlayerState();
    if (state === 1) player.pauseVideo();
    else player.playVideo();
};

document.getElementById("volume").oninput = e => {
    player.setVolume(e.target.value);
};

function updateSeek() {
    setInterval(() => {
        if (player && player.getDuration) {
            let p = (player.getCurrentTime() / player.getDuration()) * 100;
            document.getElementById("seekBar").value = p || 0;
        }
    }, 500);
}
</script><style>
body {
    background:#121212;
    color:white;
    transition:0.25s;
}

body.light {
    background:#f5f5f5;
    color:black;
}

.top-bar {
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:15px 20px;
    font-size:20px;
}

.theme-toggle {
    background:none;
    border:none;
    font-size:22px;
    cursor:pointer;
}

.search-container {
    text-align:center;
    margin-top:20px;
}

#searchInput {
    width:400px;
    padding:10px;
    border-radius:6px;
    border:none;
}

#searchBtn {
    padding:10px 15px;
    border:none;
    background:#1DB954;
    color:white;
    border-radius:6px;
    cursor:pointer;
}

#resultsWrapper {
    display:flex;
    justify-content:center;
    margin-top:25px;
}

#results {
    width:800px;
}

.result-item {
    display:flex;
    background:#181818;
    padding:12px;
    border-radius:10px;
    margin-bottom:12px;
    box-shadow:0 2px 8px rgba(0,0,0,0.4);
    cursor:pointer;
    transition:0.2s;
}

body.light .result-item {
    background:white;
    box-shadow:0 2px 8px rgba(0,0,0,0.15);
}

.result-item:hover {
    transform:scale(1.02);
}

.thumb {
    width:80px;
    height:60px;
    border-radius:6px;
    margin-right:12px;
}

.song {
    font-size:16px;
    font-weight:bold;
}

.artist {
    font-size:13px;
    opacity:0.7;
}

#playerBar {
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    background:#181818;
    padding:10px;
    display:flex;
    flex-direction:column;
    gap:8px;
}

body.light #playerBar {
    background:white;
}

.controls {
    display:flex;
    align-items:center;
    gap:10px;
}
</style>

</body>
</html>
